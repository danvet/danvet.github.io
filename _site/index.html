<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>stuff by danvet</title>
  <meta name="description" content="Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.
">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="http://yourdomain.com/">
  <link rel="alternate" type="application/rss+xml" title="stuff by danvet" href="http://yourdomain.com/feed.xml">
</head>


  <body>

    <header class="site-header">

  <div class="wrapper">

    <a class="site-title" href="/">stuff by danvet</a>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>

      <div class="trigger">
        
          
          <a class="page-link" href="/about/">About</a>
          
        
          
        
          
        
          
        
      </div>
    </nav>

  </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="home">

  <h1 class="page-heading">Posts</h1>

  <ul class="post-list">
    
      <li>
        <span class="post-meta">Jun 6, 2016</span>

        <h2>
          <a class="post-link" href="/2016/06/06/awesome-atomic-advances.html">Awesome Atomic Advances</a>
        </h2>
	Also, silly titles. Atomic has taken of for real, right now there's 17 drivers supporting <a href="http://blog.ffwll.ch/2015/08/atomic-modesetting-design-overview.html">atomic modesetting</a> merged into the DRM subsystem. And still a pile of them each release pending for review&amp;merging. But it's not just new drivers, there's also been a steady stream of small improvements over the past year, I think it's time for an update.<br /><br />


      </li>
    
      <li>
        <span class="post-meta">Jun 4, 2016</span>

        <h2>
          <a class="post-link" href="/2016/06/04/on-getting-patches-merged.html">On Getting Patches Merged</a>
        </h2>
	In some project there's an awesome process to handle newcomer's contributions - autobuilder picks up your pull and runs full CI on it, coding style checkers automatically do basic review, and the functional review load is also at least all assigned with tooling too.<br /><br />Then there's projects where utter chaos and ad-hoc process reign, like the Linux kernel or the X.org community, and it's much harder for new folks to get their foot into the door. Of course there's documentation trying to bridge that gap, tools like get_maintainers.pl to figure out whom to ping, but that's kinda the details. In the end you need someone from the inside to care about what you're doing and guide you through the maze the first few times.<br /><br />I've been pinged about this a few times recently on IRC, so I figured I'll type up my recommended best practices.<br /><br /><br />


      </li>
    
      <li>
        <span class="post-meta">May 10, 2016</span>

        <h2>
          <a class="post-link" href="/2016/05/10/neat-drmi915-stuff-for-47.html">Neat drm/i915 Stuff for 4.7</a>
        </h2>
	The <a href="http://blog.ffwll.ch/2016/03/neat-drmi915-stuff-for-46.html">4.6 release</a> is almost out of the door, it's time to look at what's in store for 4.7.<br />


      </li>
    
      <li>
        <span class="post-meta">Apr 28, 2016</span>

        <h2>
          <a class="post-link" href="/2016/04/28/xorg-foundation-election-results.html">X.Org Foundation Election Results</a>
        </h2>
	Two questions were up for voting, 4 seats on the Board of Directors and approval of the amended By-Laws to join SPI.<br /><br />Congratulations to our reelected and new board members Egbert Eich, Alex Deucher, Keith Packard and Bryce Harrington. Thanks a lot to Lucas Stach for running. And also big thanks to our outgoing board member Matt Dew, who stepped down for personal reasons.<br /><br />On the bylaw changes and merging with SPI, 61 out of 65 active members voted, with 54 voting yes, 4 no and 3 abstained. Which means we're well past the 2/3rd quorum for bylaw changes, and everything's green now to proceed with the plan to join SPI!
      </li>
    
      <li>
        <span class="post-meta">Apr 24, 2016</span>

        <h2>
          <a class="post-link" href="/2016/04/24/should-xorg-foundation-join-spi-vote-now.html">Should the X.org Foundation join SPI? Vote Now!</a>
        </h2>
	<div class="separator" style="clear: both; text-align: center;"><a href="https://2.bp.blogspot.com/-0xdeyuFfML0/VxcuHa6le1I/AAAAAAAAAY0/szB2xu42-qwWGLZpwIitJYZkDKiNrgBsQCKgB/s1600/vote_now.jpg" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="320" src="https://2.bp.blogspot.com/-0xdeyuFfML0/VxcuHa6le1I/AAAAAAAAAY0/szB2xu42-qwWGLZpwIitJYZkDKiNrgBsQCKgB/s320/vote_now.jpg" width="320" /></a></div><br /><br /><a href="http://keithp.com/blogs/x.org-election/">In</a> <a href="https://phoronix.com/scan.php?page=news_item&amp;px=Xorg-2016-Elections-Start">case</a> you <a href="http://blog.ffwll.ch/2016/04/xorg-foundation-election-vote-now.html?showComment=1461317453899#c781631829836255757">missed</a> <a href="http://www.xorg-foundation.org/wiki/BoardOfDirectors/Elections/2016/">it</a>: Please vote now on <a href="https://members.x.org/login.php">https://members.x.org/login.php</a>!
      </li>
    
      <li>
        <span class="post-meta">Apr 20, 2016</span>

        <h2>
          <a class="post-link" href="/2016/04/20/xorg-foundation-election-vote-now.html">X.org Foundation Election - Vote Now!</a>
        </h2>
	<div class="separator" style="clear: both; text-align: center;"><a href="https://1.bp.blogspot.com/-0xdeyuFfML0/VxcuHa6le1I/AAAAAAAAAYw/qho0p0LtZH0jfQGQ5L01ZoedVmL9fKaFQCLcB/s1600/vote_now.jpg" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="320" src="https://1.bp.blogspot.com/-0xdeyuFfML0/VxcuHa6le1I/AAAAAAAAAYw/qho0p0LtZH0jfQGQ5L01ZoedVmL9fKaFQCLcB/s320/vote_now.jpg" width="320" /></a></div>It's election season in X.org land, and it matters: Besides new board seats we're also voting on bylaw changes and whether to join SPI or not.<br /><br />Personally, and as the secretary of the board I'm very much in favour of joining SPI. It will allow us to offload all the boring bits of running a foundation, and those are also all the bits we tend to struggle with. And that would give the board more time to do things that actually matter and help the community. And all that for a really reasonable price - running our own legal entity isn't free, and not really worth it for our small budget mostly consisting of travel sponsoring and the occasional internship.<br /><br />And bylaw changes need a qualified supermajority of all members, every vote counts and not voting essentially means voting no. Hence please vote, and please vote even when you don't want to join - this is our second attempt and I'd really like to see a clear verdict from our members, one way or the other.<br /><br />Thanks.<br /><br />Voting closes by&nbsp; <strong>             Apr 26  23:59 UTC</strong>, but please don't cut it short, it's a computer that decides when it's over ...<br /><br />
      </li>
    
      <li>
        <span class="post-meta">Mar 10, 2016</span>

        <h2>
          <a class="post-link" href="/2016/03/10/neat-drmi915-stuff-for-46.html">Neat drm/i915 stuff for 4.6</a>
        </h2>
	The <a href="http://blog.ffwll.ch/2016/01/neat-drmi915-stuff-for-45.html">4.5 release </a>is close, it's time to look at what's in store for the next kernel's merge window in the Intel graphics driver.<br />


      </li>
    
      <li>
        <span class="post-meta">Feb 10, 2016</span>

        <h2>
          <a class="post-link" href="/2016/02/10/arm-kernel-cross-compiling.html">ARM kernel cross compiling</a>
        </h2>
	I do a lot of cross driver subsytem refactorings, and DRM has lots of drivers that only run on ARM. Which means I routinely break a leg or arm since at least in the past cross-compiling was somehow always super painful. But I've just learned (thanks to Daniel Stone) that cross-compiling this stuff has become real easy, so here's my handy script for this. This assumes Debian, but the difference is just in installing a different cross-compiler toolchain.<br /><br />First get the tooling:<br /><br /><code>$ sudo apt-get install gcc-arm-linux-gnueabihf</code><br /><code>&nbsp;</code><br />Then create another git checkout. I prefer the recently merged worktree support, since with that all your branches and remotes transparently work in the new checkout, too.<br /><br /><code>~/kernel/src/ $ git worktree add ../armhf HEAD</code><br /><code>&nbsp;</code><br />With that we're all set up. For building any <code>$branch</code> wrap the following lines into a scrip:<br /><br /><code>$ cd ~/kernel/armhf<br />$ git checkout --detach $branch<br />$ make ARCH=arm CROSS_COMPILE=arm-linux-gnueabihf- multi_v7_defconfig zImage modules</code><br /><br />I'm using --detach to avoid complaints from the git worktree code that I've checked out a branch already in the main repo. Note: Never accidentally run plain make in the ARM build directory - mixing up architectures seriously confuses the kernel build system.
      </li>
    
      <li>
        <span class="post-meta">Feb 8, 2016</span>

        <h2>
          <a class="post-link" href="/2016/02/08/lca-geelong-embrace-atomic-display-age.html">LCA Geelong: Embrace the Atomic Display Age</a>
        </h2>
	Back from another awesome linux.conf.au, still the best general Linux conference even the second time around. I've also done a talk about all the <a href="https://linux.conf.au/schedule/30132/view_talk?day=wednesday">shiny new atomic display support</a> in the kernel, and the great LCA AV team has <a href="https://www.youtube.com/watch?v=LjiB_JeDn2M&amp;feature=youtu.be">uploaded the video</a> already, and <a href="https://people.freedesktop.org/~danvet/presentations/lca-2016.pdf">the slides are here</a>.
      </li>
    
      <li>
        <span class="post-meta">Jan 14, 2016</span>

        <h2>
          <a class="post-link" href="/2016/01/14/vt-switching-with-atomic-modeset.html">VT Switching with Atomic Modeset</a>
        </h2>
	First the title is a slight lie, this really is about compositor switching and not necessarily about using Linux VTs for that. But I hope that the title draws in the right folks and tempts them to read this. Since with atomic there's a bit a problem if you want to switch between different compositors - maybe you have X running and hack on wayland-mutter, or kwin and mutter or just a DE and a login manager&nbsp; - and expect it to not end up in a modern arts project like <a href="https://twitter.com/__damien__/status/676741658940186625">this</a>.<br />


      </li>
    
      <li>
        <span class="post-meta">Jan 11, 2016</span>

        <h2>
          <a class="post-link" href="/2016/01/11/neat-drmi915-stuff-for-45.html">Neat drm/i915 stuff for 4.5</a>
        </h2>
	<a href="http://blog.ffwll.ch/2015/12/neat-drmi915-stuff-for-44.html">Kernel version 4.4</a> is released, it's time for our regular look at what's in store for the Intel graphics driver in the next release.<br />


      </li>
    
      <li>
        <span class="post-meta">Jan 11, 2016</span>

        <h2>
          <a class="post-link" href="/2016/01/11/better-markup-for-kernel-gpu-docbook.html">Better Markup for the Kernel GPU DocBook</a>
        </h2>
	This summer Intel sponsored some work to improve the kerneldoc toolchain, with the aim to use all that to extend the DRM and i915 driver documentation we have. Most of it landed, but the last bit to integrate some type&nbsp; of text markup processing was stalled until it could be discussed at the kernel summit, see the  <a href="https://lwn.net/Articles/662930/" rel="nofollow">LWN summary</a>. Unfortunately it died in a bikeshed fest due to an alliance of people who think docs are useless and you should just read the code, and others who didn't even know how to convert the kerneldoc into something pretty.<br /><br />But we still need this, since without lists, highlighting, basic tables and inserting code snippets it's really hard to write decent documentation. Luckily Dave Airlie is ok with using it for DRM kerneldoc as long as Intel maintains the support. It's purely opt-in and the only downside of not using <code>asciidoc</code> is that the resulting docs won't be as pretty. All the changes to the text itself to use this markup are going into upstream as normal. The only bit that's not in upstream is the tooling, which is available in a topic branch at<br /><br /><pre>        git://anongit.freedesktop.org/drm-intel topic/kerneldoc</pre><br /><br />If you want to build pretty docs just install <code>asciidoc</code> and base your drm documentation patches on top of drm-intel-nightly from the same repository - that tree also includes all of Dave's tree. Alternatively pull in the above topic branch into your own personal tree.  Note that <code>asciidoc</code> is detected automatically, so you really only need it and the tooling branch to check the rendering of your changes.<br /><br />For added convenience Intel also maintains an autobuilder that pushes latest drm-intel-nightly DRM documentation builds to      <a href="http://dri.freedesktop.org/docs/drm/" rel="nofollow">http://dri.freedesktop.org/docs/drm/</a>.<br /><br />Aside: If all you want to build is just the GPU DocBook instead of all of them, you can do that with<br /><br /><pre>        $ make DOCBOOKS="gpu.xml" htmldocs</pre><br />With that have fun reading the new&amp;improved documentation, and if you spot anything please submit a patch to dri-devel@lists.freedesktop.org. 
      </li>
    
      <li>
        <span class="post-meta">Dec 9, 2015</span>

        <h2>
          <a class="post-link" href="/2015/12/09/neat-drmi915-stuff-for-44.html">Neat drm/i915 stuff for 4.4</a>
        </h2>
	Due to vacations, conferences and other things I'm way later than usual and <a href="http://blog.ffwll.ch/2015/09/neat-drmi915-stuff-for-43.html">4.3 has been released</a> a while ago. More than overdue to take a look at what's in store in the next kernel release.<br />


      </li>
    
      <li>
        <span class="post-meta">Sep 18, 2015</span>

        <h2>
          <a class="post-link" href="/2015/09/18/xdc-2015-atomic-modesetting-for-drivers.html">XDC 2015: Atomic Modesetting for Drivers</a>
        </h2>
	I've done a talk at <a href="http://www.x.org/wiki/Events/XDC2015/">XDC 2015</a> about atomic modesetting with a focus for driver writers. Most of the talk is an overview of how an atomic modeset looks and how to implement the different parts in a driver backend. Anyway, for all those who missed it, there's a <a href="https://www.youtube.com/watch?v=kl9suFgbTc8">video</a> and <a href="http://people.freedesktop.org/~danvet/presentations/xdc-2015.pdf">slides</a>.
      </li>
    
      <li>
        <span class="post-meta">Sep 7, 2015</span>

        <h2>
          <a class="post-link" href="/2015/09/07/neat-drmi915-stuff-for-43.html">Neat drm/i915 stuff for 4.3</a>
        </h2>
	<a href="http://blog.ffwll.ch/2015/06/neat-drmi915-stuff-for-42.html">Kernel 4.2</a> is released already and the 4.3 merge window in full swing, time to look at what's in it for the intel graphics driver.<br /><br />


      </li>
    
      <li>
        <span class="post-meta">Aug 16, 2015</span>

        <h2>
          <a class="post-link" href="/2015/08/16/atomic-modesetting-design-overview.html">Atomic Modesetting Design Overview</a>
        </h2>
	After a few years of development the atomic display update IOCTL for drm drivers is finally ready for prime time with the <a href="http://mid.mail-archive.com/alpine.DEB.2.00.1506260158440.13786@skynet.skynet.ie">4.2 pull request from Dave Airlie</a>. It's been a long road, with a lot of drivers <a href="http://blog.ffwll.ch/2014/11/atomic-modeset-support-for-kms-drivers.html">already converted over to atomic</a> and even more in progress, the <a href="http://blog.ffwll.ch/2015/01/update-for-atomic-display-updates.html">atomic helper libraries and support code in the drm subsystem</a> sufficiently polished. But what's really missing is a design overview of what the overall atomic infrastructure looks like and why some decisions and details are implemented like they are.<br /><br />That's now done and published on LWN: <a href="https://lwn.net/Articles/653071/">Part 1 talks about the problem space, issues with the Android atomic display framework and the basic atomic IOCTL interface.</a> <a href="https://lwn.net/Articles/653466/">Part 2 goes into more detail about a few specific things like locking, helper library design and the exact semantics of atomic modessetting updates.</a> Happy Reading! 
      </li>
    
      <li>
        <span class="post-meta">Jun 1, 2015</span>

        <h2>
          <a class="post-link" href="/2015/06/01/neat-drmi915-stuff-for-42.html">Neat drm/i915 stuff for 4.2</a>
        </h2>
	The <a href="http://blog.ffwll.ch/2015/04/neat-drmi915-stuff-for-41.html">4.1 kernel release</a> is still a few weeks off and hence a bit early to talk about 4.2. But the drm subsystem feature cut-off already passed and I'm going on vacation for 2 weeks, so here we go.<br />


      </li>
    
      <li>
        <span class="post-meta">May 8, 2015</span>

        <h2>
          <a class="post-link" href="/2015/05/08/gfx-kernel-upstreaming-requirements.html">GFX Kernel Upstreaming Requirements</a>
        </h2>
	Upstreaming requirements for the DRM subsystem are a bit special since Dave Airlie requires a full-blown open-source implementation as a demonstration vehicle for any new interfaces added. I've figured it's better to clear this up once instead of dealing with the fallout from surprises and made a few slides for a training session. Dave reviewed and acked them, hence this should be the up-to-date rules - the old mails and <a href="https://airlied.livejournal.com/73337.html">blogs</a> <a href="https://airlied.livejournal.com/73337.html">back</a> <a href="https://airlied.livejournal.com/76383.html">from</a> when some ARM SoC vendors tried to push drm drivers for blob userspace to upstream are a bit outdated.<br /><br />Any here's the <a href="https://secure.freedesktop.org/~danvet/presentations/gfx_kmd_upstream_abi_requirements.pdf">slides for my gfx kernel upstreaming requirements training</a>.
      </li>
    
      <li>
        <span class="post-meta">Apr 20, 2015</span>

        <h2>
          <a class="post-link" href="/2015/04/20/neat-drmi915-stuff-for-41.html">Neat drm/i915 stuff for 4.1</a>
        </h2>
	With <a href="http://blog.ffwll.ch/2015/02/neat-drmi915-stuff-for-320.html">Linux kernel v3.20^W v4.0</a> already out there door my overview of what's in 4.1 for drm/i915 is way overdue.<br />


      </li>
    
      <li>
        <span class="post-meta">Apr 2, 2015</span>

        <h2>
          <a class="post-link" href="/2015/04/02/community-code-of-conduct-for-intel-gfx.html">Community Code of Conduct for intel-gfx</a>
        </h2>
	[This is a cross-post from the <a href="http://lists.freedesktop.org/archives/intel-gfx/2015-April/063766.html">mail I just sent out to intel-gfx</a>.] <br /><br />Code of conducts seem to be in the news a bit recently, and I realized that I've never really documented how we run things. It's different from the kernel's overall <a href="https://www.kernel.org/doc/Documentation/CodeOfConflict">CodeOfConflict</a> and also differs from the official <a href="https://01.org/linuxgraphics/community">Intel/OTC one</a> in small details about handling issues. And for completeness there's also the <a href="http://www.x.org/wiki/XorgFoundation/Policies/Harassment/">Xorg Foundation event policy</a>. Anyway, I think this is worth clarifying and here it goes.<br />


      </li>
    
      <li>
        <span class="post-meta">Feb 12, 2015</span>

        <h2>
          <a class="post-link" href="/2015/02/12/neat-drmi915-stuff-for-320.html">Neat drm/i915 Stuff for 3.20</a>
        </h2>
	<a href="http://blog.ffwll.ch/2014/12/neat-drmi915-stuff-for-319.html">Linux 3.19</a> was just released and my usual overview of what the next merge window will bring is more than overdue. The big thing overall is certainly all the work around <a href="http://blog.ffwll.ch/2015/01/update-for-atomic-display-updates.html">atomic display updates</a>, but read on for what else all has been done.<br />


      </li>
    
      <li>
        <span class="post-meta">Jan 28, 2015</span>

        <h2>
          <a class="post-link" href="/2015/01/28/update-for-atomic-display-updates.html">Update for Atomic Display Updates</a>
        </h2>
	Another kernel release is imminent and a lot of things happened since my last big blog post about <a href="http://blog.ffwll.ch/2014/11/atomic-modeset-support-for-kms-drivers.html">atomic modeset</a>. Read on for what new shiny things 3.20 will bring this area.<br />


      </li>
    
      <li>
        <span class="post-meta">Jan 19, 2015</span>

        <h2>
          <a class="post-link" href="/2015/01/19/lca-2015-botching-up-ioctls.html">LCA 2015: Botching Up IOCTLs</a>
        </h2>
	So I'm stuck somewhere on an airport and jetlagged on my return trip from my very first LCA in Auckland - awesome conference, except for being on the wrong side of the globe: Very broad range of speakers, awesome people all around, great organization and since it's still a community conference none of the marketing nonsense and sales-pitch keynotes.<br /><br />Also done a presentation about <a href="http://blog.ffwll.ch/2013/11/botching-up-ioctls.html">botching up ioctls</a>. Compared to my blog post a bunch more details on technical issues and some overall comments on what's really important to avoid a v2 ioctl because v1 ended up being unsalvageable. <a href="http://people.freedesktop.org/~danvet/presentations/lca-2015.pdf">Slides</a> and <a href="https://www.youtube.com/watch?v=WnqXHs_tGR4">video</a> (curtesy the LCA video team).
      </li>
    
      <li>
        <span class="post-meta">Dec 16, 2014</span>

        <h2>
          <a class="post-link" href="/2014/12/16/neat-drmi915-stuff-for-319.html">Neat drm/i915 stuff for 3.19</a>
        </h2>
	So <a href="http://blog.ffwll.ch/2014/10/neat-drmi915-stuff-for-318.html">kernel version 3.18</a> is out the door and it's time for our regular look at what's in the next merge window.<br />


      </li>
    
      <li>
        <span class="post-meta">Nov 2, 2014</span>

        <h2>
          <a class="post-link" href="/2014/11/02/atomic-modeset-support-for-kms-drivers.html">Atomic Modeset Support for KMS Drivers</a>
        </h2>
	<p>So I've just reposted my <a href="http://article.gmane.org/gmane.comp.video.dri.devel/117376">atomic modeset helper series</a>, and since the main goal of all that work was to ensure a smooth and simple transition for existing drivers to the promised atomic land it's time to elaborate a bit. The big problem is that the existing helper libraries and callbacks to driver backends don't really fit the new semantics, so some shuffling was required to avoid long-term pain. So if you are a driver writer and just interested in the details then read for what needs to be done to support atomic modeset updates using these new helper libraries.</p>


      </li>
    
      <li>
        <span class="post-meta">Oct 3, 2014</span>

        <h2>
          <a class="post-link" href="/2014/10/03/neat-drmi915-stuff-for-318.html">Neat drm/i915 stuff for 3.18</a>
        </h2>
	Since Dave Airlie moved the feature cut-off of the drm-next tree roughly one month ahead it is already time for our regular look at what's ahead. Even though <a href="http://blog.ffwll.ch/2014/08/neat-stuff-for-317.html">the 3.17 features</a> aren't even released yet.<br /><br />


      </li>
    
      <li>
        <span class="post-meta">Aug 29, 2014</span>

        <h2>
          <a class="post-link" href="/2014/08/29/review-training-slides.html">Review Training Slides</a>
        </h2>
	We currently have a large influx of new people contributing to i915 - for the curious just check the git logs. As part of ramping them up I've done a few trainings about upstream review, and a bunch of people I've talked with at KS in Chicago were interested in that, too. So I've cleaned up the slides a bit and dropped the very few references to Intel internal resources. No speaker notes or video recording, but I think this is useful all in itself. And of course if you have comments or see big gaps - feedback is very much welcome:<br /><br /><a href="http://people.freedesktop.org/~danvet/presentations/review-training-public.pdf">Upstream Review Training Slides</a>
      </li>
    
      <li>
        <span class="post-meta">Aug 7, 2014</span>

        <h2>
          <a class="post-link" href="/2014/08/07/neat-stuff-for-317.html">Neat stuff for 3.17</a>
        </h2>
	So with the <a href="http://blog.ffwll.ch/2014/06/neat-drmi915-stuff-for-316.html">3.16 kernel</a> out of the door it's time to look at what's queued up for the Intel graphics driver in 3.17.<br />


      </li>
    
      <li>
        <span class="post-meta">Jun 11, 2014</span>

        <h2>
          <a class="post-link" href="/2014/06/11/documentation-for-drmi915.html">Documentation for drm/i915</a>
        </h2>
	So over the past few years the drm subsystem gained some very nice documentation. And recently we've started to follow suite with the Intel graphics driver. All the kernel documenation is integrated into one big DocBook and I regularly upload latest HTML builds of the <a href="http://people.freedesktop.org/~danvet/drm/">Linux DRM Developer's Guide</a>. This is built from drm-intel-nightly so has slightly freshed documentation (hopefully) than the usual DocBook builds from Linus' main branch which can be found all over the place. If you want to build these yourself simply run<br /><br /><code>$ make htmldocs</code><br /><br />For testing we now also have neat <a href="http://people.freedesktop.org/~danvet/igt/">documentation for the infrastructure and helper libraries found in intel-gpu-tools</a>. The README in the i-g-t repository has detailed build instructions - gtkdoc is a bit more of a fuzz to integrate.<br /><br />Below the break some more details about documentation requirements relevant for developers.<br />


      </li>
    
      <li>
        <span class="post-meta">Jun 10, 2014</span>

        <h2>
          <a class="post-link" href="/2014/06/10/neat-drmi915-stuff-for-316.html">Neat drm/i915 stuff for 3.16</a>
        </h2>
	Linus decided to have a bit fun with the 3.16 merge window and the <a href="http://blog.ffwll.ch/2014/04/neat-drmi915-stuff-for-315.html">3.15 release</a>, so I'm a bit late with our regular look at the new stuff for the Intel graphics driver.<br />


      </li>
    
      <li>
        <span class="post-meta">May 7, 2014</span>

        <h2>
          <a class="post-link" href="/2014/05/07/linuxtag-2014.html">LinuxTag 2014</a>
        </h2>
	Tomorrow I'll be travelling to LinuxTag in Berlin for the first time. Should be pretty cool, and to top it off I'll give a presentation about the <a href="http://www.linuxtag.org/2014/de/programm/vortragsdetails/?eventid=2332">state of the intel kernel graphics driver</a>. For those that can't attend I've uploaded the <a href="http://people.freedesktop.org/~danvet/presentations/linuxtag-2014.odp">slides</a> already, and if there's a video cut I'll link to that as soon as it's available.
      </li>
    
      <li>
        <span class="post-meta">Apr 1, 2014</span>

        <h2>
          <a class="post-link" href="/2014/04/01/neat-drmi915-stuff-for-315.html">Neat drm/i915 stuff for 3.15</a>
        </h2>
	So the release of the <a href="https://www.blogger.com/%3Cdegasus%3E%20but%20when%20implementing%20running%20based%20on%20walking%20needs%20some%20major%20api%20changes%20:/">3.14 linux kernel</a> already happended and I'm a bit late for our regular look at what cool stuff will land in the 3.15 merge window for the Intel graphics driver.<br /><br />


      </li>
    
      <li>
        <span class="post-meta">Feb 5, 2014</span>

        <h2>
          <a class="post-link" href="/2014/02/05/new-drmi915-git-repository.html">New drm/i915 Git Repository</a>
        </h2>
	So earlier this year I've signed up <a href="http://comments.gmane.org/gmane.comp.freedesktop.xorg.drivers.intel/31780">Jani Nikula officially as co-maintainer</a>. Now we've also gotten around to move the drm/i915 git repository to a <a href="http://cgit.freedesktop.org/drm-intel">common location</a> so that there's no longer a need to move it around when I'm on vacation. So everone please update any git references and remotes:<br /><pre><br /><a href="git://anongit.freedesktop.org/drm-intel">git://anongit.freedesktop.org/drm-intel</a><br /><a href="ssh://git.freedesktop.org/git/drm-intel">ssh://git.freedesktop.org/git/drm-intel</a><br /></pre>
      </li>
    
      <li>
        <span class="post-meta">Feb 4, 2014</span>

        <h2>
          <a class="post-link" href="/2014/02/04/fosdem-testing-kernel-gpu-drivers.html">FOSDEM: Testing Kernel GPU Drivers</a>
        </h2>
	So as usual FOSDEM was a blast and as usual the hallway track was great too. The beer certainly helped with that ... Big props to the entire conference crew for organizing a stellar event and specifically to Luc and the other graphics devroom people.<br /><br />I've also uploaded the slides for my <a href="http://people.freedesktop.org/~danvet/presentations/fosdem-2014.odp">Kernel GPU Driver Testing</a> talk. My OCD made me remove that additional dot and resurrect the missing 'e' in one of the slides even. FOSDEM also had live-streaming and rendering videos should eventually show up, I'll add the link as soon as it's there.<br /><br /><b>Update:</b> FOSDEM staff published the <a href="http://video.fosdem.org/2014/H1301_Cornil/Sunday/Testing_Kernel_GFX_Drivers.webm">video of the talk</a>! 
      </li>
    
      <li>
        <span class="post-meta">Jan 15, 2014</span>

        <h2>
          <a class="post-link" href="/2014/01/15/neat-drmi915-stuff-for-314.html">Neat drm/i915 stuff for 3.14</a>
        </h2>
	<a href="http://blog.ffwll.ch/search/label/Kernel%20RelNotes">Kernel v3.13</a> is nearing its release, so it's time at our regular look at what the next version will bring to the Intel gfx driver.<br />


      </li>
    
      <li>
        <span class="post-meta">Nov 22, 2013</span>

        <h2>
          <a class="post-link" href="/2013/11/22/botching-up-ioctls.html">Botching up ioctls</a>
        </h2>
	One clear insight kernel graphics hackers gained in the past few years is that trying to come up with a unified interface to manage the execution units and memory on completely different GPUs is a futile effort. So nowadays every driver has its own set of ioctls to allocate memory and submit work to the GPU. Which is nice, since there's no more insanity in the form of fake-generic, but actually only used once interfaces. But the clear downside is that there's much more potential to screw things up.<br /><br />To avoid repeating all the same mistakes again I've written up some of the lessons learned while botching the job for the drm/i915 driver. Most of these only cover technicalities and not the big-picture issues like what the <a href="http://blog.ffwll.ch/2011/01/on-getting-your-api-right.html">command submission ioctl exactly should look like</a>. Learning these lessons is probably something every GPU driver has to do on its own.<br /><br />


      </li>
    
      <li>
        <span class="post-meta">Nov 13, 2013</span>

        <h2>
          <a class="post-link" href="/2013/11/13/testing-requirements-for-drmi915.html">Testing Requirements for drm/i915 Features and Patches</a>
        </h2>
	I want to make automated test coverage an integral part of our feature and bugfix development process. For features this means that starting with the design phase testability needs to be considered an integral part of any feature. This needs to go through the entire development process, from planning, development, patch submission and final validation. For bugfixes that means the fix is only complete once the automated testcase for it is also done, if we need a new one<br /><br />This specifically excludes testing with humans somewhere in the loop. We are extremely limited in our validation resources, every time we put something new onto the "manual testing" plate something else <i>will</i> fall off. <br /><br />  I've let this float for quite a while both internally in Intel and on the public mailing lists. Thanks to everyone who provided valuable input. Essentially this just codifies the already existing expectations from me as the maintainer, but those requirements haven't really been clear and a lot of emotional discussions ensued. With this we should now have solid guidelines and can go back to coding instead of blowing through so much time and energy on waging flamewars. <br /><br />


      </li>
    
      <li>
        <span class="post-meta">Nov 2, 2013</span>

        <h2>
          <a class="post-link" href="/2013/11/02/its-that-time-again-when-old-kernel-v3.html">Neat drm/i915 stuff for 3.13</a>
        </h2>
	It's that time again when the old <a href="http://blog.ffwll.ch/2013/11/its-that-time-again-when-old-kernel-v3.html">kernel v3.12</a> will be released shortly and we'll take a look at what's in store for the Intel GFX driver in 3.13.<br /><br />


      </li>
    
      <li>
        <span class="post-meta">Sep 21, 2013</span>

        <h2>
          <a class="post-link" href="/2013/09/21/more-drmi915-testsuite-infrastructure.html">More drm/i915 Testsuite Infrastructure</a>
        </h2>
	<p>So after the recent <a href="http://blog.ffwll.ch/2013/08/recent-drmi915-testsuite-improvements.html">overview over our kernel test infrastructure</a> I've had to write a bunch multithreaded testcases. And since I'm rather lazily I've opted to create a few more helpers that hide all the little details when forking and joining processes. While at I think it's also a good time to explain a bit the infrastructure we have to help running the kernel testsuite on simulated hardware and a few other generally useful things in our testsuite helper library. </p>


      </li>
    
      <li>
        <span class="post-meta">Sep 2, 2013</span>

        <h2>
          <a class="post-link" href="/2013/09/02/neat-drmi915-stuff-for-312.html">Neat drm/i915 stuff for 3.12</a>
        </h2>
	So <a href="http://blog.ffwll.ch/2013/06/neat-drmi915-stuff-for-311.html">kernel 3.11</a> will be released soonish and it's time for our regular look at what the next merge window will bring in for the intel GPU driver.<br />


      </li>
    
      <li>
        <span class="post-meta">Aug 28, 2013</span>

        <h2>
          <a class="post-link" href="/2013/08/28/recent-drmi915-testsuite-improvements.html">Recent drm/i915 Testsuite Improvements</a>
        </h2>
	<p>So recently I've again wreaked decent havoc in our intel-gpu-tools kernel testsuite. And then shockingly noticed that I've never done a big pompous blog post to announce what we've started about one-a-half years ago. So besides just describing the new infrastructure for writing testcases (apparently every decent hacker must reinvent a testframework at least once ...) I'll also recap a bit what's been going on in the past. </p>


      </li>
    
      <li>
        <span class="post-meta">Jul 24, 2013</span>

        <h2>
          <a class="post-link" href="/2013/07/24/in-which-kernel-release-will-feature.html">In Which Kernel Release Will $FEATURE Land In?</a>
        </h2>
	So I get asked this question quite often and since I'm a terribly lazy person I'm just going to write this down once and then link to it ...<br /><br />


      </li>
    
      <li>
        <span class="post-meta">Jul 23, 2013</span>

        <h2>
          <a class="post-link" href="/2013/07/23/precomputing-crtc-configuration-in.html">Precomputing the CRTC Configuration in drm/i915</a>
        </h2>
	<p>Like I've briefly mentioned when explaining the <a href="http://blog.ffwll.ch/2012/08/new-modeset-code.html">new modeset code</a> merged into <a href="http://blog.ffwll.ch/2012/10/neat-drmi915-stuff-for-37.html">kernel 3.7</a> one of the goals was to facility atomic modesetting and fastboot. Now the big new requirement for both atomic modesetting and fastboot is that we precompute the entire output configuration before we start touching the hardware. And this includes things like pll settings, internal link configuration and watermarks. For atomic modesetting we need this to be able to decide up-front whether a configuration requested by userspace works, or whether we don't have enough bandwidth, display plls or lack some other resource. For fastboot we need to be able to compute and track the full display hardware state in software so that we can compare a requested configuration from userspace with the boot-up state taken over from the BIOS. Otherwise we might end up with suboptimal settings inherited from the firmware or worse, we'd try to reuse some resources still in use by the firmware configuration (like when the BIOS and the linux driver would pick different display plls). </p><p>Now the new modeset code merged into 3.7 already added such state tracking and precomputation for the output routing between crtcs and connectors. Over the past months, starting with the just released 3.10 linux kernel we've added new infrastructure and tons of code to track the low-level hardware state like display pll selection, FDI link configuration and tons of other things. Read on below for an overview of how the new magic works. </p>


      </li>
    
      <li>
        <span class="post-meta">Jul 5, 2013</span>

        <h2>
          <a class="post-link" href="/2013/07/05/on-forklifting-and-pitchforks.html">On Forklifting and Pitchforks</a>
        </h2>
	<p>So sometimes someone wants the latest drm kernel driver bits, but please on a ridiculously outdated stable kernel like last month's release. Or much worse, actually something from last year. </p><p>Ok I'm getting ahead of myself here, usually these things start with a request for a "minimal" backport to enable <code>$NEW_PLATFORM</code> or some other really important feature. But the lesson that drm drivers are complex beasts and that such minimal backports tend to require full validation again and a lot of work to fix up the fallout is usually learned quickly. So backporting the entire beast with all drivers it is. </p><p>The next obvious question is why we can't just copy the entire thing, since reconstructing the git history is rather tedious work, and usually ends up with a few commits in between that don't quite work correctly. Which means that the backported git history is usually of little value. The answer to that question tends to boil down to "we've promised this to the customer ...". So if you're in such a situation, read on below on how to most efficiently wrestle git to forklift the history of an entire subsystem onto an older kernel release. </p>


      </li>
    
      <li>
        <span class="post-meta">Jul 2, 2013</span>

        <h2>
          <a class="post-link" href="/2013/07/02/drmi915-branches-explained.html">drm/i915 Branches Explained</a>
        </h2>
	Since I've <a href="http://blog.ffwll.ch/2012/01/new-drm-intel-next-git-tree.html">started maintaining the drm/i915 over a year ago</a> I've fined-tuned the branching model a lot. So I think it's time for an update, especially since <a href="http://lists.freedesktop.org/archives/intel-gfx/2013-July/029648.html">Sedat Dilek poked me about it</a>.<br /><br />


      </li>
    
      <li>
        <span class="post-meta">Jun 29, 2013</span>

        <h2>
          <a class="post-link" href="/2013/06/29/neat-drmi915-stuff-for-311.html">Neat drm/i915 stuff for 3.11</a>
        </h2>
	<a href="http://blog.ffwll.ch/2013/04/neat-drmi915-stuff-for-310.html">Kernel 3.10</a> will be release soon, so it's time for our regular look at what the next kernel will bring. Purely on statistics the drm-intel-next pull for 3.11&nbsp; is one of the biggest pull request with 314 patches thus far. Read on after the break for the details.<br /><br /> 


      </li>
    
      <li>
        <span class="post-meta">May 26, 2013</span>

        <h2>
          <a class="post-link" href="/2013/05/26/i915gem-q.html">i915/GEM Q&A</a>
        </h2>
	So apparently people do indeed read my my <a href="http://blog.ffwll.ch/2013/01/i915gem-crashcourse-overview.html">i915/GEM crashcourse</a> and a bunch of follow-up questions popped up in private mails. Since I'm a lazy bastard I've cleaned some of the common questions&amp;answers up to be able to easily point at them. And hopefully they also help someone else to clarify things a bit.<br /><br />


      </li>
    
      <li>
        <span class="post-meta">Apr 18, 2013</span>

        <h2>
          <a class="post-link" href="/2013/04/18/neat-drmi915-stuff-for-310.html">Neat drm/i915 stuff for 3.10</a>
        </h2>
	So kernel <a href="http://blog.ffwll.ch/2013/02/neat-drmi915-stuff-for-39.html">3.9</a> should be releasing really soon and so it's time for our regular look at what 3.10 brings to drm/i915:<br /><br />


      </li>
    
      <li>
        <span class="post-meta">Mar 24, 2013</span>

        <h2>
          <a class="post-link" href="/2013/03/24/overclocking-your-intel-gpu-on-linux.html">Overclocking your Intel GPU on Linux</a>
        </h2>
	First things first: If you damage your hardware and burn down your house, it's not my problem. You've been warned!<br /><br />So after a bit of irc discusssions yesterday it turns out that you can overclock intel gpus by quite a margin. Which makes some sense now that the gfx performance of intel chips isn't something to be completely ashamed of.<br />


      </li>
    
      <li>
        <span class="post-meta">Feb 17, 2013</span>

        <h2>
          <a class="post-link" href="/2013/02/17/neat-drmi915-stuff-for-39.html">Neat drm/i915 stuff for 3.9</a>
        </h2>
	<p>So now that <a href="http://blog.ffwll.ch/2012/11/neat-drmi915-stuff-for-38.html">3.8</a> is winding down it's time to look at what 3.9 will bring for the drm/i915 driver:</p>


      </li>
    
      <li>
        <span class="post-meta">Feb 7, 2013</span>

        <h2>
          <a class="post-link" href="/2013/02/07/new-kernel-modesetting-locking.html">New Kernel Modesetting Locking</a>
        </h2>
	<p>Now that my kernel modesetting lockig rework has <a href="http://cgit.freedesktop.org/~airlied/linux/commit/?h=drm-next&amp;id=735dc0d1e29329ff34ec97f66e130cce481c9607">landed</a> in Dave's drm-next tree and is gearing up for inclusion into 3.9 I've figured it's time to also post my little intro here: </p><p>The aim of this locking rework is that ioctls which a compositor should be might call for every frame (set_cursor, page_flip, addfb, rmfb and getfb/create_handle) should not be able to block on kms background activities like output detection. And since each EDID read takes about 25ms (in the best case), that always means we'll drop at least one frame. </p><p>The solution is to add per-crtc locking for these ioctls, and restrict background activities to only use the global lock. Change-the-world type of events (modeset, dpms, ...) need to grab all locks. </p>


      </li>
    
      <li>
        <span class="post-meta">Feb 5, 2013</span>

        <h2>
          <a class="post-link" href="/2013/02/05/fosdem-slides-2013.html">FOSDEM Slides 2013</a>
        </h2>
	FOSDEM was great as ever, despite that I've managed to grab a bit too much attention from my management by spilling the Intel OTC gfx driver team headcount a bit ;-) Anyway, for those who missed my presentation, I've uploaded <a href="http://people.freedesktop.org/~danvet/presentations/fosdem-2013.odp">the slides</a> (with that embarrassing typo fixed in one headline). Phoronix should upload a video of the talk soon, I'll add a link as soon as that happens.
      </li>
    
      <li>
        <span class="post-meta">Jan 7, 2013</span>

        <h2>
          <a class="post-link" href="/2013/01/07/i915gem-crashcourse-overview.html">i915/GEM Crashcourse: Overview</a>
        </h2>
	Now that the entire series is done I've figured a small overview would be in order.<br /><br /><a href="http://blog.ffwll.ch/2012/10/i915gem-crashcourse.html">Part 1</a> talks about the different address spaces that a i915 GEM buffer object can reside in and where and how the respective page tables are set up. Then it also covers different buffer layouts as far as they're a concern for the kernel, namely how tiling, swizzling and fencing works.<br /><br /><a href="http://blog.ffwll.ch/2012/11/i915gem-crashcourse-part-2.html">Part 2</a> covers all the different bits and pieces required to submit work to the gpu and keep track of the gpu's progress: Command submission, relocation handling, command retiring and synchronization are the topics.<br /><br /><a href="http://blog.ffwll.ch/2012/11/i915gem-crashcourse-part-3.html">Part 3</a> looks at some of the details of the memory management implement in the i915.ko driver. Specifically we look at how we handle running out of GTT space and what happens when we're generally short on memory.<br /><br />Finally <a href="http://blog.ffwll.ch/2013/01/i915gem-crashcourse-part-4.html">part 4</a> discusses coherency and caches and how to most efficiently transfer between the gpu coherency domains and the cpu coherncy domain under different circumstances.<br /><br />Happy reading! <br /><b>Update:</b> There's now also a new article with a few <a href="http://blog.ffwll.ch/2013/05/i915gem-q.html">questions and answers about some details in the i915 gem code</a>.
      </li>
    
      <li>
        <span class="post-meta">Jan 7, 2013</span>

        <h2>
          <a class="post-link" href="/2013/01/07/i915gem-crashcourse-part-4.html">i915/GEM Crashcourse, Part 4</a>
        </h2>
	<p>In the previous installment we've taken a closer look at some <a href="http://blog.ffwll.ch/2012/11/i915gem-crashcourse-part-3.html">details of the gpu memory management</a>. One of the last big topics now still left are all the various caches, both on the gpu (both render and display block) and the cpu, and what is required to keep the data coherent between them. Now one of the reasons gpus are so fast at processing raw amounts of data is that caches are managed through explicit instructions (cutting down massively on complexity and delays) and there are also a lot of special-purpose caches optimized for different use-cases. Since coherency management isn't automatic, we will also consider the different ways to move data between different coherency domains and what the respective up- and downsides are. See the <a href="http://blog.ffwll.ch/2013/01/i915gem-crashcourse-overview.html">i915/GEM crashcourse overview</a> for links to the other parts of this series.  </p>


      </li>
    
      <li>
        <span class="post-meta">Nov 28, 2012</span>

        <h2>
          <a class="post-link" href="/2012/11/28/i915gem-crashcourse-part-3.html">i915/GEM Crashcourse, Part 3</a>
        </h2>
	<p>In previous installments of this series we've looked at <a href="http://blog.ffwll.ch/2012/10/i915gem-crashcourse.html">how the gpu can access memory</a> and <a href="http://blog.ffwll.ch/2012/11/neat-drmi915-stuff-for-38.html">how to submit a workload to the gpu</a>. Now we will look at some of the corner cases in more detail. See the <a href="http://blog.ffwll.ch/2013/01/i915gem-crashcourse-overview.html">i915/GEM crashcourse overview</a> for links to the other parts of this series.  </p> 


      </li>
    
      <li>
        <span class="post-meta">Nov 21, 2012</span>

        <h2>
          <a class="post-link" href="/2012/11/21/neat-drmi915-stuff-for-38.html">Neat drm/i915 stuff for 3.8</a>
        </h2>
	<p>So <a href="http://blog.ffwll.ch/2012/10/neat-drmi915-stuff-for-37.html">kernel 3.7</a> hasn't even shipped yet, but we're already lining up all the ducks for 3.8. And since feature wise I don't expect anything massive any more on top (since the feature merge period will close rsn) I've figured I might do the overview as well a bit earlier: </p>


      </li>
    
      <li>
        <span class="post-meta">Nov 1, 2012</span>

        <h2>
          <a class="post-link" href="/2012/11/01/i915gem-crashcourse-part-2.html">i915/GEM Crashcourse, Part 2</a>
        </h2>
	<p>After the <a href="http://blog.ffwll.ch/2012/10/i915gem-crashcourse.html">previous installement</a> this part will cover command submission to the gpu. See the <a href="http://blog.ffwll.ch/2013/01/i915gem-crashcourse-overview.html">i915/GEM crashcourse overview</a> for links to the other parts of this series.  </p>


      </li>
    
      <li>
        <span class="post-meta">Oct 30, 2012</span>

        <h2>
          <a class="post-link" href="/2012/10/30/i915gem-crashcourse.html">i915/GEM Crashcourse</a>
        </h2>
	<p>This is the first part in a short tour of the Intel hardware and what the GEM (graphics execution manager) in the i915 does. See the <a href="http://blog.ffwll.ch/2013/01/i915gem-crashcourse-overview.html">overview</a> for links to the other parts. </p>


      </li>
    
      <li>
        <span class="post-meta">Oct 2, 2012</span>

        <h2>
          <a class="post-link" href="/2012/10/02/neat-drmi915-stuff-for-37.html">Neat drm/i915 stuff for 3.7</a>
        </h2>
	Now that the upstream merge window has started and my last drm-intel-next pull request landed in Dave Airlie's drm tree it's a good time to look at some of the things landing in 3.7:<br />


      </li>
    
      <li>
        <span class="post-meta">Sep 21, 2012</span>

        <h2>
          <a class="post-link" href="/2012/09/21/slides-for-xdc-2012-presentation.html">Slides for XDC 2012 Presentation</a>
        </h2>
	I've already published a short <a href="http://blog.ffwll.ch/2012/08/new-modeset-code.html">writeup</a>, now I've also put up the <a href="http://people.freedesktop.org/~danvet/presentations/xdc2012-new_modeset.odp">slides</a>. There's also nice writeups of all other XDC sessions available at the <a href="http://www.x.org/wiki/Events/XDC2012/Proceedings">X Wiki</a>. I'll add a direct link to the video of my talk once it shows up.
      </li>
    
      <li>
        <span class="post-meta">Aug 19, 2012</span>

        <h2>
          <a class="post-link" href="/2012/08/19/new-modeset-code.html">New Modeset Code</a>
        </h2>
	drm/i915.ko is gearing up to gain a new modeset code, to finally move away from the crtc helper code (in drm/drm_crtc_helper.c) used by (up to now) all kms drivers. As a quick reference I'll detail the motivation and design of the new code a bit here (mostly stitched together from patchbomb announcements and commits introducing the new concepts).<br />


      </li>
    
      <li>
        <span class="post-meta">Jul 12, 2012</span>

        <h2>
          <a class="post-link" href="/2012/07/12/eugeni-dodonov-1981-2012.html">Eugeni Dodonov, 1981-2012</a>
        </h2>
	Personally I'll remember you as the cheerful hacker who signed up for all sorts of crazy stuff. And then followed through and came out of the dungeons with some great patches - or at least a few good jokes.<br /><br />Rest in peace, we'll miss you.
      </li>
    
      <li>
        <span class="post-meta">May 19, 2012</span>

        <h2>
          <a class="post-link" href="/2012/05/19/git-for-bug-reporters.html">git for Bug Reporters</a>
        </h2>
	Pretty often I point bug reporters at random git branches and sometimes they'll happily compile kernels from sources, but have no idea about git. Unfortunately there doesn't seem to be a quick how-to tailored to the needs of bug reporters, so let's fix that.<br /><br />$ git clone --depth 1 --no-checkout --no-single-branch &lt;git-repo-path&gt;<br /><br />This clones the git repository, but avoids downloading the entire history. It also avoids to check out the default branch because usually you need a specific branch for testing.<br /><br />All the following commands only work if the working directory is within the newly cloned git repository.<br /><br />$ git checkout origin/&lt;branch-name&gt;<br /><br />will check out the git branch &lt;branch-name&gt; (from the remote git repository) into the local git repository so that you can use it. git will complain about 'detached HEAD' but that's only really important when committing new changes, so just ignore that. If you already have an older clone of the git same remote repository, you first need to update the local git database (in the .git directory in your local repository) with<br /><br />$ git fetch origin<br /><br />before checking out the branch again. Even if you need to test the same, but updated branch, you need to do <i>both</i> steps - git doesn't update anything automatically by default.<br /><br />If you have patches or other local changes applied, git might complain that there's a conflict. You can simply remove all local changes with<br /><br />$ git reset --hard<br /><br />and then re-do the checkout command. Much more rarely some build artifacts could get in the way (or you just need a quick way to start a clean build),<br /><br />$ git clean -dfx<br /><br />will remove any files not in the currently checked-out git commit.
      </li>
    
      <li>
        <span class="post-meta">Feb 3, 2012</span>

        <h2>
          <a class="post-link" href="/2012/02/03/slides-for-fodsem-2012-dmabuf.html">Slides for FODSEM 2012 dma_buf presentation</a>
        </h2>
	I'm to lazy to publish a proper writeup of my FOSDEM talk of where dma_buf is currently standing, where it'll likely head to and what to might still come in 1-2 years. But you can grabt the <a href="http://people.freedesktop.org/~danvet/presentations/fosdem2012-dma_buf.odp">slides</a>. Enjoy!<br /><br />Edit: Phoronix also has an article with <a href="http://www.phoronix.com/scan.php?page=news_item&px=MTA1NDE">video</a> recordings.
      </li>
    
      <li>
        <span class="post-meta">Jan 14, 2012</span>

        <h2>
          <a class="post-link" href="/2012/01/14/new-drm-intel-next-git-tree.html">New drm-intel-next Git Tree</a>
        </h2>
	[This is a verbatim copy of the announcement that went out to intel-gfx &amp; Co. today.]<br /><br />Because Keith is routinely really busy with all kinds of things, notably gathering fixes for drm-intel-fixes, the patch merge process for the next release cycle sometimes falls behind. To support him and improve things I've been volunteered to take over handling the -next tree.<br /><br />The main aim is to shift the drm/i915 -next merge process massively ahead with the goals to:<br /><ul><li>Reduce pressure to merge questionable patches into -rc kernels because the -next tree is not yet open for patches.</li><li>Allow our QA at Intel and also the community to actually test things before  they land in mainline. The lack of such testing has severly bitten us in the  past few releases.</li><li>Refocus -fixes on handling regressions with absolute top priority (as it  should).</li><li>And generally get a steady and predictable patch-flow towards mainline back  into gears.<br /></li></ul><br />I plan to run this -next tree with a few simple rules:<br /><ul><li>I'll open the drm/i915 -next tree around -rc1 (maybe earlier in the future)  and cut regular new trees about every 2nd week or so. 2 weeks should be enough  for both our qa and the community to give it some decent testing.</li><li>I intend to send out the previous -next to Dave Airlie (assuming it tests ok)  so that he has a good check on the stuff that's going on in i915-land. A few  other people also asked for a better overview of what's going on on drm/i915 -  I'll plan to announce every new -next tree with a short mail (maybe together  with the pull request to Dave for the old one).</li><li>-next will close about 1-2 weeks before the merge opens. No new features after  that point for a given release cycle.</li><li>To make this really work we also need to cut down on what can go into -fixes.  drm/i915 unfortunately has the reputation that deserves it a bunch of  draconian rules (which are stricter than drm/* in general):<ul><li>  Only fixes for serious issues and regressions after the -next tree went to    Dave.</li><li>After -rc2 regression fixes only. It simply happend why too often that an    "obvious" patch blew up late in the -rc release cycle, my patches included.  - After -rc4/5 only reverts and disable patches. Imo it's way too late to play    games by then, the real fix should go straight to -next (which will close    only a few weeks afterwards already).</li></ul></li><li>Regressions have top priority, if they get neglected due to ongoing work  headed for -next I'll refuse to merge the patches.<br /></li><li>We have a test-suite in the intel-gpu-tools package for the kernel. Expect me  to be annoying about patches that should have testcases for them but don't.  This includes new features, but also bugs that can be reproduced with a  reasonable amount of effort.</li><li>To avoid me pushing utter crack I will only merge my own patches after they  have gathered sufficient review on intel-gfx. Please yell at me at the top of  your voice (and in public) if I violate this.</li><li>The main discussion list for patches to drm/i915 is  <a href="mailto:intel-gfx@lists.freedesktop.org">intel-gfx@lists.freedesktop.org</a> - I don't keep up with lkml usually.</li><li>I'll reserve my human right to act like an incompetent arrogant fool once in a  while.</li></ul><br />Last but not least, the new tree is available at<br /><br /><a href="http://cgit.freedesktop.org/%7Edanvet/drm-intel">http://cgit.freedesktop.org/~danvet/drm-intel</a><br />git://people.freedesktop.org/~danvet/drm-intel<br /><br />drm-intel-next is the main branch, but I expect at least a for-airlied branch for pull requests and maybe other branches with proposed patches to show up.<br /><br />Comments, flames and suggestions highly welcome.<br /><br />Yours, Daniel<br /><br />PS: Quick version for people with too short attentation spans:<br /><br /><ul><li>-next will open around -rc1, a new tree should show up about every second  week. -next trees that are tested will regurarly be forwarded to Dave.</li><li>No stuff in -fixes that should go into -next instead.</li><li>-next will close for features about 1-2 weeks ahead of the upstream merge window.</li><li>Regressions have top priority.</li><li>Implementing proper tests is required.</li><li>Hit me hard if I break these rules for my own patches.</li><li>Sometimes I'll screw things up badly.<br /></li></ul>Now grab the tree from<br /><br />git://people.freedesktop.org/~danvet/drm-intel
      </li>
    
      <li>
        <span class="post-meta">May 4, 2011</span>

        <h2>
          <a class="post-link" href="/2011/05/04/gem-overview.html">GEM Overview</a>
        </h2>
	This is the script of a short intro I've given at the Linaro@UDS memory management summit in Budapest in spring 2011. Yep, it's a bit old ...<br />


      </li>
    
      <li>
        <span class="post-meta">Feb 26, 2011</span>

        <h2>
          <a class="post-link" href="/2011/02/26/hell-froze-over.html">Hell Froze Over</a>
        </h2>
	From the infamous "i855GM cache coherency is made of fail" <a href="https://bugs.freedesktop.org/show_bug.cgi?id=27187">bug</a>:<br /><br /><blockquote>legolas558: In yesterday's git pull I have noticed some interesting patches and I can say that the vanilla kernel (with xorg-server 1.9.4 and xf86-video-intel 2.14.0) is now very stable, no video corruptions and videos playing smoothly</blockquote><br />'Nuff said.
      </li>
    
      <li>
        <span class="post-meta">Jan 6, 2011</span>

        <h2>
          <a class="post-link" href="/2011/01/06/on-getting-your-api-right.html">On Getting Your API Right</a>
        </h2>
	Ben Widawsky is writing hardware contexts support for the i915 drm module. The resulting API <a href="http://lists.freedesktop.org/archives/intel-gfx/2010-December/009059.html">discussion</a> showed that things are not simple and probably in need of an iteration or two. Now linux kernel rules mandate that an ioctl once merged must be supported (almost) forever. So one can still see all the evolutionary steps of gpu command submission:<br /><br /><b>cmdbuffer:</b> The kernel simply copies the commands given by userspace into the hardware ringbuffer. Bad, because the kernel needs to copy everything. And it can't use hardware features to check the commands because commands in the ringbuffer are assumed to be trusted.<br /><br /><b>batchbuffer:</b> Userspace hands in a GTT adress and the kernel executes it with an MI_BATCHBUFFER command from the ringbuffer. No copying, and the hardware does some rudimentary security checking (the newer your chip, the more). But handing in a fixed GTT address requires that userspace is in full control of the graphics memory. Which fails with GEM - if you neglect some rather hacky porting of libXvMC to DRI2/GEM ...<br /><br /><b>execbuffer:</b> Due to GEM, userspaces references buffer objects only by handles. So the new command submission path takes the id of a buffer containing the commands. Plus a list of buffer objects used by this command stream (textures, shaders, color- and depthbuffer, ...) and a list of relocations so the kernel can fix up buffer addresses in the command stream. As an optimization, the kernel passes back the current GTT address of all buffers used. This way the kernel only needs to fix up address in when buffers have moved around since the last time being used.<br /><br /><b>execbuffer2:</b> Unfortunately the structures used by execbuf don't have reserved fields, so the next extension required an new ioctl. Older hardware (still being sold in Atom based netbooks) requires the setup of so called buffer fences (not to be confused with execution fences) for tiled buffers. But only for certain commands. There are only 16 fences available (on newer hardware, 8 on older) so this severely restricts performance. Especially since fences are not required by the 3D engine. So execbuf2 was born with a flag to explicitly designate buffers that need fences.<br /><br />Due to plenty of reserved fields in execbuf2 <b>multiple ringbuffer suppor</b>t didn't need a new ioctl. But to keep things funny, there are two versions: First inter-ring synchronization must have been done by userspace, in later versions the kernel takes care of this.<br /><br />And now hardware context support adds its own complications. And likely requires another interface for command submission. Or two, because Intel hardware moves towards a per-process GTT, possibly handing back full control over the memory layout to userspace - somewhat similar to the DRI1 interfaces ...<br /><br />And for anyone forced to design an API, read these <a href="http://ozlabs.org/~rusty/index.cgi/tech/2008-03-30.html">two</a> <a href="http://ozlabs.org/~rusty/index.cgi/tech/2008-04-01.html">posts</a> by Rusty Russells.
      </li>
    
  </ul>

  <p class="rss-subscribe">subscribe <a href="/feed.xml">via RSS</a></p>

</div>

      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <h2 class="footer-heading">stuff by danvet</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li>stuff by danvet</li>
          <li><a href="mailto:your-email@domain.com">your-email@domain.com</a></li>
        </ul>
      </div>

      <div class="footer-col footer-col-2">
        <ul class="social-media-list">
          
          <li>
            <a href="https://github.com/danvet"><span class="icon icon--github"><svg viewBox="0 0 16 16"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
</span><span class="username">danvet</span></a>

          </li>
          

          
          <li>
            <a href="https://twitter.com/danvet"><span class="icon icon--twitter"><svg viewBox="0 0 16 16"><path fill="#828282" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/></svg>
</span><span class="username">danvet</span></a>

          </li>
          
        </ul>
      </div>

      <div class="footer-col footer-col-3">
        <p>Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.
</p>
      </div>
    </div>

  </div>

</footer>


  </body>

</html>
